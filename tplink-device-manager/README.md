# TP-Link 设备管理器

一个基于Web的TP-Link路由器设备管理工具，支持批量修改设备名称，支持CSV导入导出功能。

## 功能特性

- 🔐 **路由器登录认证** - 支持TP-Link路由器Web登录
- 📱 **设备列表显示** - 实时显示所有连接的设备信息
- ✏️ **单个设备改名** - 直接在界面中修改设备名称
- 📊 **自动刷新** - 可选10秒自动刷新设备列表
- 📥 **CSV导出** - 导出当前设备列表供编辑
- 📤 **CSV导入** - 批量导入修改后的设备名称
- 🐳 **Docker支持** - 提供Docker部署方案

## 快速开始

### 方式一：Docker部署（推荐）

1. 克隆项目：
```bash
git clone <repository-url>
cd tplink-device-manager
```

2. 使用Docker Compose启动：
```bash
docker-compose up -d
```

3. 访问 `http://localhost:5000`

### 方式二：本地运行

1. 安装Python依赖：
```bash
cd backend
pip install -r requirements.txt
```

2. 运行应用：
```bash
python app.py
```

3. 访问 `http://localhost:5000`

## 使用说明

### 1. 登录路由器
- 输入路由器内网IP地址（如：192.168.1.1）
- 输入登录密码
- 点击"登录"按钮

### 2. 查看设备列表
- 登录成功后自动显示当前连接的所有设备
- 包含设备名称、MAC地址、IP地址、连接类型等信息

### 3. 修改设备名称
- **单个修改**：在设备列表中直接编辑名称，点击"修改"按钮
- **批量修改**：
  1. 点击"导出CSV"下载当前设备列表
  2. 在Excel或其他工具中编辑"新名称"列
  3. 点击"导入CSV"上传修改后的文件
  4. 系统自动批量处理并显示结果

### 4. 自动刷新
- 开启"自动刷新"开关，系统每10秒自动更新设备列表
- 关闭开关则停止自动刷新

## CSV文件格式

导出的CSV文件包含以下列：
- MAC地址：设备的MAC地址（唯一标识）
- 设备名称：当前设备名称
- IP地址：设备当前IP地址
- 连接类型：设备连接方式
- 新名称：**请在此列填写要修改的新名称**

## 注意事项

1. **网络要求**：运行设备需要能与TP-Link路由器正常通信
2. **密码要求**：需要使用路由器的Web登录密码，不是TP-Link ID密码
3. **兼容性**：基于你提供的curl命令测试，支持大部分TP-Link路由器
4. **请求频率**：批量操作时会自动添加延迟，避免请求过快
5. **SSL证书**：如使用HTTPS连接，会忽略SSL证书验证

## 技术架构

- **后端**：Python Flask + requests
- **前端**：原生HTML/CSS/JavaScript
- **部署**：Docker + Docker Compose
- **API**：RESTful API设计

## API接口

### 认证相关
- `POST /api/login` - 登录路由器

### 设备管理
- `GET /api/devices` - 获取设备列表
- `PUT /api/device/<mac>/name` - 修改单个设备名称
- `POST /api/devices/batch-name` - 批量修改设备名称

### 文件操作
- `GET /api/devices/export` - 导出设备列表CSV
- `POST /api/devices/import` - 导入CSV批量更新

## 故障排除

1. **登录失败**
   - 检查路由器IP地址是否正确
   - 确认密码是路由器Web登录密码
   - 检查网络连接是否正常

2. **无法获取设备列表**
   - 确认路由器型号兼容
   - 检查是否被路由器安全策略拦截
   - 尝试重新登录

3. **批量操作失败**
   - 检查CSV文件格式是否正确
   - 确认MAC地址格式正确（XX:XX:XX:XX:XX:XX）
   - 检查新名称是否包含特殊字符

## 安全说明

- 密码仅在内存中临时保存，不会存储到磁盘
- 建议在受信任的内部网络环境中使用
- 定期更新路由器密码确保安全性

## 许可证

MIT License